<!DOCTYPE html>
<html lang="en">

<head>
    <%- include ("../partials/header.ejs") %>
</head>

<body class="layout-boxed alt-menu">

    <%- include ("../partials/loader.ejs") %>

        <%- include ("../partials/nav.ejs") %>

            <!--  BEGIN MAIN CONTAINER  -->
            <div class="main-container sidebar-closed " id="container">

                <div class="overlay"></div>
                <div class="search-overlay"></div>

                <%- include ("../partials/sidebar.ejs") %>

                    <!--  BEGIN CONTENT AREA  -->
                    <div id="content" class="main-content">
                        <div class="layout-px-spacing">

                            <div class="middle-content container-xxl p-0">
                                <!-- BREADCRUMB -->
                                <div class="page-meta">
                                    <nav class="breadcrumb-style-one" aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="/supplierUsers">Supplier
                                                    User Management</a></li>
                                            <li class="breadcrumb-item active" aria-current="page">Edit</li>
                                        </ol>
                                    </nav>
                                </div>
                                <!-- /BREADCRUMB -->

                                <div class="row layout-spacing">
                                    <div class="col-lg-12 layout-top-spacing">
                                        <div class="col-lg-12">
                                            <div class="statbox widget box box-shadow">
                                                <div class="widget-header">
                                                    <div class="row">
                                                        <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                            <h4></h4>
                                                        </div>
                                                    </div>
                                                </div>
                                                <form method="post">
                                                    <div class="widget-content widget-content-area">
                                                        <div class="row">
                                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                                <h6>Company Name</h6>
                                                            </div>
                                                        </div>

                                                        <div class="row layout-spacing">
                                                            <div class="col-lg-6 col-12 ">
                                                                <form method="post">
                                                                    <div class="form-group">
                                                                        <label for="companyName"
                                                                            class="visually-hidden">Text</label>
                                                                        <input id="companyName" type="text"
                                                                            name="companyName" placeholder=""
                                                                            class="form-control" required value="<%= data.companyName %>">
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                                <h6>P - ID</h6>
                                                            </div>
                                                        </div>

                                                        <div class="row layout-spacing">
                                                            <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="companyNumber"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="companyNumber" type="text"
                                                                        name="companyNumber" placeholder=""
                                                                        class="form-control" required value="<%= data.companyNumber %>">
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                                <h6>Main Phone Number(ID)</h6>
                                                            </div>
                                                        </div>

                                                        <div class="row layout-spacing">
                                                            <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="mainPhoneNum"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="mainPhoneNum" type="text"
                                                                        name="mainPhoneNum" placeholder=""
                                                                        class="form-control" required value="<%= data.mainPhoneNum %>">
                                                                    <button type="button" class="btn btn-outline-info mb-2 me-4"
                                                                        onclick="checkID()">중복확인</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- 
                                                    <div class="row">
                                                        <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                            <h6>Password</h6>
                                                        </div>
                                                    </div>

                                                    <div class="row layout-spacing">
                                                        <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="password"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="password" type="password" name="password"
                                                                        placeholder="" class="form-control" required>
                                                                </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                            <h6>Confirm Password</h6>
                                                        </div>
                                                    </div>

                                                    <div class="row layout-spacing">
                                                        <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="confirm_password"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="confirm_password" type="password" name="confirm_password"
                                                                        placeholder="" class="form-control" required>
                                                                </div>
                                                        </div>
                                                    </div> -->

                                                        <div class="row">
                                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                                <h6>Address</h6>
                                                            </div>
                                                        </div>

                                                        <div class="row layout-spacing">
                                                            <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="address"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="address" type="text" name="address"
                                                                        placeholder="" class="form-control" required value="<%= data.address %>">
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                                <h6>Owner Name</h6>
                                                            </div>
                                                        </div>

                                                        <div class="row layout-spacing">
                                                            <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="ownerName"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="ownerName" type="text" name="ownerName"
                                                                        placeholder="" class="form-control" required value="<%= data.ownerName %>">
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                                <h6>Phone</h6>
                                                            </div>
                                                        </div>

                                                        <div class="row layout-spacing">
                                                            <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="phoneNum"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="phoneNum" type="text" name="phoneNum"
                                                                        placeholder="" class="form-control" required value="<%= data.phoneNum %>">
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                                <h6>Email</h6>
                                                            </div>
                                                        </div>

                                                        <div class="row layout-spacing">
                                                            <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="email"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="email" type="text" name="email"
                                                                        placeholder="" class="form-control" required value="<%= data.email %>">
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                                                <h6>Note</h6>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <label for="note"
                                                                        class="visually-hidden">Text</label>
                                                                    <input id="note" type="text" name="note"
                                                                        placeholder="" class="form-control" value="<%= data.note %>">
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row layout-top-spacing">
                                                            <div class="col-lg-6 col-12 ">
                                                                <div class="form-group">
                                                                    <button
                                                                        class="btn btn-outline-success mb-2 me-4">Save</button>
                                                                    <button class="btn btn-outline-danger mb-2 me-4"
                                                                        type="button" onclick="cancel()">Cancel</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <%- include ("../partials/footer.ejs") %>
                    </div>
                    <!--  END CONTENT AREA  -->
            </div>
            <!-- END MAIN CONTAINER -->

            <%- include ("../partials/commonScrpits.ejs") %>

                <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->
                <script>
                    async function checkID() {
                        let mainPhoneNum = $('#mainPhoneNum').val();
                        console.log(mainPhoneNum);

                        if(mainPhoneNum=='<%= data.mainPhoneNum %>') return alert("사용가능한 ID입니다.");

                        let url = '/supplierUsers/checkID';
                        await fetch(url, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ mainPhoneNum }),
                            redirect: "follow"
                        })
                            .then((response) => {
                                // console.log(response);
                                if (response.ok) return alert("사용가능한 ID입니다.");
                                else return alert("사용할 수 없는 ID입니다.")
                            })
                            .catch((err) => {
                                console.log(err)
                            });
                    }
                </script>
                <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->
</body>

</html>